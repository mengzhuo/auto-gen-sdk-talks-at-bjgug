大家好,我是来自Glu的程序员蒙卓，今天我给大家讲讲，Go自动生成SDK实践。
有云计算公司的朋友么？好的，你们不需要下面的设想了，回去就可以动手了。
现在我们设想自己是家云计算公司的员工，上头说要推出Go语言的SDK了，API的样式就是上面这样子的。
(此处翻页)

通过API我们可以看到像Start Instance，开机指令，Stop Instance，
关机指令，List Host 列出所有机器， 这些API，是的，还有100多个类似的接口。怎么编写呢？
(点进网页浏览)
(此处翻页)

复制粘贴？ 一个个地写，看起来要干上一周吧。
(此处翻页)

是的！其实能给力点！
(此处翻页)

就是借助Golang的反射库，让我们看看定义，（读一遍）
难理解是吧，其实就和下面这幅图一样，Go程序可以知道自己运行的时候长什么样。
为了不搞晕大家，反射库我接下来都叫它reflect库。
那我们来看看它的用法。
(此处翻页)

（读一遍）
就是这么简单。
那我们来看看一个例子。
(此处翻页)

好，我们来写个完整点的例子。
（讲解代码）
(讲解运行结果)
有人由问题么？
(此处翻页)

好，没有问题了，我们再看一遍开机API请求的结构吧。
(点进网页浏览)
(此处翻页)

这里有点新玩意叫struct tag，用过json库的朋友可能不陌生。
struct tag可以由reflect库读出来，至于怎么用，我们再说。
(此处翻页)

接下来，我们开始构建它的返回数据。
(点进网页浏览)

好，那我们请求、返回结构都有了，接下来就是怎么把它们拼成url了。
(此处翻页)

(讲解代码)
(此处翻页)

总结一下
（读一遍）
(此处翻页)

是的！其实能更加给力点！
(此处翻页)

下面就是学习go generate的时间了。
简单地说，generate是自动生成代码的一条go 命令。
如下图所示，我们可以将html文件转化成go可执行代码，
是不是很诱人啊，不用复制粘贴，那我们来看看怎么做吧。
(此处翻页)

首先，是文件格式
形如这样的.go文件都会执行命令，官方有篇博客讲述了这个问题。
但，问题是咱们不会yacc！所以，只能从命令入手了。
当然，我们是纯Go编写，所以Python Ruby啥的都不需要。
go本身就能比较好地完成这项工作。
(此处翻页)

接下来，我们需要在项目代码中添加生成器，还需要它能用go run运行，
这就需要text库下面的template子库。
当GOPATH中包含了不同包名称时，解析器是会报错的，所以我们需要用build ignore进行结合，毕竟go run 的速度还是相当给力的。
(此处翻页)

（讲解代码）
(展示完整的代码)
(此处翻页)

现在我们总结一下用go generate出来的代码的优点。
1.可以很容易的定位bug，因为在不同的文件，执行栈也非常清晰。而且生成的代码速度非常快，执行的速度也非常快。
2.可以不停地重复生成，当然，如果改版了，我们就需要改变生成器的代码。
3.不会出错，人总是会犯错的，复制粘贴都有可能出错。
其实，这里我只是说了一个go generate的用法
在游戏行业，可以用这种方式生成对象模型，包括很多枯燥乏味的对象方法。
这样古板，枯燥的，毫无抽象的代码，和我们平时接受的训练和思维方式是相反的，因为这在代码层面是没有任何抽象可言的。
而生成代码本身就是一种高度的抽象，超越了代码本身的抽象，是一种思维的抽象，这就是我希望这次的分享能带给大家的。
在这，我引用Rob Pike的一句话进行收尾吧。
(此处翻页)
让机器干机器的活去
谢谢大家
